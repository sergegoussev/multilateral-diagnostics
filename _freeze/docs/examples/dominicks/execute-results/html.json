{
  "hash": "145c3cc408254af21491d68503c16fc1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Showcase with Dominick's dataset\"\ndescription: \"Dominicks offers us a rich real world scanner dateset (focusing on food from stores)\"\nbibliography: ../references.bib\ndraft: true\nformat:\n  html:\n    toc: true\n    toc-expand: 2\n---\n\n\n\n\n## Overview of the data\n\nThe Dominick's dataset is a rich rich and very useful dataset to leverage in validating how diagnostics and analytics can be designed with scanner data. Since it was first proposed by @mehrhoff2018promoting, it has been widely used within price statistics, from analysis of multilateral methods by @lamboray2021index to empirical tests for the decomposition of multilateral methods by @webster2019decomposing. We leverage this dataset as it provides a very realistic example that NSOs would need to work with.\n\nThe dataset comes pre-categorized in separate product and movement files on the Chicago Booth School website (@dominicksmanual).[^1] This makes it simple to work with as we can assume that the category represents the elementary index prior to its integration into the CPI with other retailer dataset and field data.\n\n[^1]: See [catalogue record](https://un-task-team-for-scanner-data.github.io/price-stats-data-catalogue/dominiks.html) in the Price Statistics Open Data catalogue for more information about the dataset.\n\n## Example indices\n\nPrior to jumping into specific time periods to trial and showcase how various diagnostic dashboards work, an overall index is useful to select these specific time periods. @fig-bjc-ccdi-example shows the Bottled Juices category over several years.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the code\"}\n# Load your functions\nsource(\"../../src/dominicks_utils.R\")\n\nlibrary(plotly)\n\nird <- homogenous_product_aggregation(\n        category_name='bjc',\n        data_dir='../../data/processed',\n        time_sample=c(1,2),\n        group_by_parameters=c('NITEM', 'REF_PERIOD'),\n        window=list(\n        \"start\" = \"1990-01-01\",\n        \"end\"   = \"1997-03-01\")\n    )\n\nccdi <- spliced_CCDI(ird)\nccdi_df <- data.frame(\n  period = names(ccdi),\n  score = as.numeric(ccdi)\n)\n\nfig <- plot_ly(ccdi_df, \n               x = ~period, \n               y = ~score, \n               type = 'scatter', \n               mode = 'lines',\n               text = ~paste(\"Period:\", period, \"<br>Index:\", score),\n               hoverinfo = 'text') %>%\n  layout(title = \"CCDI with mean splice (bjc category)\",\n         xaxis = list(title = \"Time Period\", type = 'category'), # Ensures order is maintained\n         yaxis = list(title = \"Index\", tickformat = \".1%\"))\n\nfig\n```\n\n::: {#fig-bjc-ccdi-example .cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-f60cf10bc5ee32630ff9\" style=\"width:100%;height:100%;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f60cf10bc5ee32630ff9\">{\"x\":{\"visdat\":{\"2a6c6f8a47ec\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"2a6c6f8a47ec\",\"attrs\":{\"2a6c6f8a47ec\":{\"x\":{},\"y\":{},\"mode\":\"lines\",\"text\":{},\"hoverinfo\":\"text\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"scatter\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"title\":\"CCDI with mean splice (bjc category)\",\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Time Period\",\"type\":\"category\",\"categoryorder\":\"array\",\"categoryarray\":[\"\",\"1990-02\",\"1990-03\",\"1990-04\",\"1990-05\",\"1990-06\",\"1990-07\",\"1990-08\",\"1990-09\",\"1990-10\",\"1990-11\",\"1990-12\",\"1991-01\",\"1991-02\",\"1991-03\",\"1991-04\",\"1991-05\",\"1991-06\",\"1991-07\",\"1991-08\",\"1991-09\",\"1991-10\",\"1991-11\",\"1991-12\",\"1992-01\",\"1992-02\",\"1992-03\",\"1992-04\",\"1992-05\",\"1992-06\",\"1992-07\",\"1992-08\",\"1992-09\",\"1992-10\",\"1992-11\",\"1992-12\",\"1993-01\",\"1993-02\",\"1993-03\",\"1993-04\",\"1993-05\",\"1993-06\",\"1993-07\",\"1993-08\",\"1993-09\",\"1993-10\",\"1993-11\",\"1993-12\",\"1994-01\",\"1994-02\",\"1994-03\",\"1994-04\",\"1994-05\",\"1994-06\",\"1994-07\",\"1994-08\",\"1994-09\",\"1994-10\",\"1994-11\",\"1994-12\",\"1995-01\",\"1995-02\",\"1995-03\",\"1995-04\",\"1995-05\",\"1995-06\",\"1995-07\",\"1995-08\",\"1995-09\",\"1995-10\",\"1995-11\",\"1995-12\",\"1996-01\",\"1996-02\",\"1996-03\",\"1996-04\",\"1996-05\",\"1996-06\",\"1996-07\",\"1996-08\",\"1996-09\",\"1996-10\",\"1996-11\",\"1996-12\",\"1997-01\",\"1997-02\"]},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Index\",\"tickformat\":\".1%\"},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[\"\",\"1990-02\",\"1990-03\",\"1990-04\",\"1990-05\",\"1990-06\",\"1990-07\",\"1990-08\",\"1990-09\",\"1990-10\",\"1990-11\",\"1990-12\",\"1991-01\",\"1991-02\",\"1991-03\",\"1991-04\",\"1991-05\",\"1991-06\",\"1991-07\",\"1991-08\",\"1991-09\",\"1991-10\",\"1991-11\",\"1991-12\",\"1992-01\",\"1992-02\",\"1992-03\",\"1992-04\",\"1992-05\",\"1992-06\",\"1992-07\",\"1992-08\",\"1992-09\",\"1992-10\",\"1992-11\",\"1992-12\",\"1993-01\",\"1993-02\",\"1993-03\",\"1993-04\",\"1993-05\",\"1993-06\",\"1993-07\",\"1993-08\",\"1993-09\",\"1993-10\",\"1993-11\",\"1993-12\",\"1994-01\",\"1994-02\",\"1994-03\",\"1994-04\",\"1994-05\",\"1994-06\",\"1994-07\",\"1994-08\",\"1994-09\",\"1994-10\",\"1994-11\",\"1994-12\",\"1995-01\",\"1995-02\",\"1995-03\",\"1995-04\",\"1995-05\",\"1995-06\",\"1995-07\",\"1995-08\",\"1995-09\",\"1995-10\",\"1995-11\",\"1995-12\",\"1996-01\",\"1996-02\",\"1996-03\",\"1996-04\",\"1996-05\",\"1996-06\",\"1996-07\",\"1996-08\",\"1996-09\",\"1996-10\",\"1996-11\",\"1996-12\",\"1997-01\",\"1997-02\"],\"y\":[1,0.94965454821283535,1.0029875443284768,1.0218262726754292,1.0148116195524106,1.0097388633189917,1.0135957158707825,1.032684241712998,1.0161327451304496,1.0388770201781261,1.0260833007911847,1.0413142810069389,1.0407914307168422,1.0365293227981329,1.0025546931716007,1.0774674892854661,1.0490871315734627,1.0286319138174309,1.085093347103081,1.083611046721189,1.0647127780501191,1.0623751032739377,1.0502420845033196,1.067519853681091,1.0810360001625772,1.1155864500927253,1.058953467772521,1.0964037778221158,1.053134162991012,1.0830554579569021,1.0830587503053555,1.102940903431004,1.0942174986883551,1.0811795209518131,1.0905865041606113,1.0758600475760354,1.0645184597832997,1.1013294039112993,1.111711462648,1.117904229503603,1.1306905475104763,1.0509424340775115,1.094894666402223,1.120769507264467,1.1344385233745946,1.1140272063010626,1.0999079184519414,1.1077231716614708,1.0542244289536851,1.0601704808327261,1.0735808645670992,1.1001188641590443,0.99700683568732229,1.019015082234487,1.1007639001809508,0.96164856231474805,1.092049630495004,0.93740678257462196,1.088242158773117,1.0552053526259422,1.0803172185795762,1.0805299169781351,1.0653123257899382,1.0683234447516785,1.073483881907777,1.079710033784347,1.1079077230675201,1.0985792653458546,1.1087692086960328,1.1047024009844026,1.1306199736448375,1.140681657290092,1.0249965754470611,1.1462614732137142,1.1416167994150455,1.1413374575839783,1.1454356272453963,1.1604983256125219,1.1285446183989432,1.13693474756998,1.1596072433746381,1.1831845285566247,1.1557197696904091,1.1989669777573411,1.1900717636371518,1.2255860402684793],\"mode\":\"lines\",\"text\":[\"Period:  <br>Index: 1\",\"Period: 1990-02 <br>Index: 0.949654548212835\",\"Period: 1990-03 <br>Index: 1.00298754432848\",\"Period: 1990-04 <br>Index: 1.02182627267543\",\"Period: 1990-05 <br>Index: 1.01481161955241\",\"Period: 1990-06 <br>Index: 1.00973886331899\",\"Period: 1990-07 <br>Index: 1.01359571587078\",\"Period: 1990-08 <br>Index: 1.032684241713\",\"Period: 1990-09 <br>Index: 1.01613274513045\",\"Period: 1990-10 <br>Index: 1.03887702017813\",\"Period: 1990-11 <br>Index: 1.02608330079118\",\"Period: 1990-12 <br>Index: 1.04131428100694\",\"Period: 1991-01 <br>Index: 1.04079143071684\",\"Period: 1991-02 <br>Index: 1.03652932279813\",\"Period: 1991-03 <br>Index: 1.0025546931716\",\"Period: 1991-04 <br>Index: 1.07746748928547\",\"Period: 1991-05 <br>Index: 1.04908713157346\",\"Period: 1991-06 <br>Index: 1.02863191381743\",\"Period: 1991-07 <br>Index: 1.08509334710308\",\"Period: 1991-08 <br>Index: 1.08361104672119\",\"Period: 1991-09 <br>Index: 1.06471277805012\",\"Period: 1991-10 <br>Index: 1.06237510327394\",\"Period: 1991-11 <br>Index: 1.05024208450332\",\"Period: 1991-12 <br>Index: 1.06751985368109\",\"Period: 1992-01 <br>Index: 1.08103600016258\",\"Period: 1992-02 <br>Index: 1.11558645009273\",\"Period: 1992-03 <br>Index: 1.05895346777252\",\"Period: 1992-04 <br>Index: 1.09640377782212\",\"Period: 1992-05 <br>Index: 1.05313416299101\",\"Period: 1992-06 <br>Index: 1.0830554579569\",\"Period: 1992-07 <br>Index: 1.08305875030536\",\"Period: 1992-08 <br>Index: 1.102940903431\",\"Period: 1992-09 <br>Index: 1.09421749868836\",\"Period: 1992-10 <br>Index: 1.08117952095181\",\"Period: 1992-11 <br>Index: 1.09058650416061\",\"Period: 1992-12 <br>Index: 1.07586004757604\",\"Period: 1993-01 <br>Index: 1.0645184597833\",\"Period: 1993-02 <br>Index: 1.1013294039113\",\"Period: 1993-03 <br>Index: 1.111711462648\",\"Period: 1993-04 <br>Index: 1.1179042295036\",\"Period: 1993-05 <br>Index: 1.13069054751048\",\"Period: 1993-06 <br>Index: 1.05094243407751\",\"Period: 1993-07 <br>Index: 1.09489466640222\",\"Period: 1993-08 <br>Index: 1.12076950726447\",\"Period: 1993-09 <br>Index: 1.13443852337459\",\"Period: 1993-10 <br>Index: 1.11402720630106\",\"Period: 1993-11 <br>Index: 1.09990791845194\",\"Period: 1993-12 <br>Index: 1.10772317166147\",\"Period: 1994-01 <br>Index: 1.05422442895369\",\"Period: 1994-02 <br>Index: 1.06017048083273\",\"Period: 1994-03 <br>Index: 1.0735808645671\",\"Period: 1994-04 <br>Index: 1.10011886415904\",\"Period: 1994-05 <br>Index: 0.997006835687322\",\"Period: 1994-06 <br>Index: 1.01901508223449\",\"Period: 1994-07 <br>Index: 1.10076390018095\",\"Period: 1994-08 <br>Index: 0.961648562314748\",\"Period: 1994-09 <br>Index: 1.092049630495\",\"Period: 1994-10 <br>Index: 0.937406782574622\",\"Period: 1994-11 <br>Index: 1.08824215877312\",\"Period: 1994-12 <br>Index: 1.05520535262594\",\"Period: 1995-01 <br>Index: 1.08031721857958\",\"Period: 1995-02 <br>Index: 1.08052991697814\",\"Period: 1995-03 <br>Index: 1.06531232578994\",\"Period: 1995-04 <br>Index: 1.06832344475168\",\"Period: 1995-05 <br>Index: 1.07348388190778\",\"Period: 1995-06 <br>Index: 1.07971003378435\",\"Period: 1995-07 <br>Index: 1.10790772306752\",\"Period: 1995-08 <br>Index: 1.09857926534585\",\"Period: 1995-09 <br>Index: 1.10876920869603\",\"Period: 1995-10 <br>Index: 1.1047024009844\",\"Period: 1995-11 <br>Index: 1.13061997364484\",\"Period: 1995-12 <br>Index: 1.14068165729009\",\"Period: 1996-01 <br>Index: 1.02499657544706\",\"Period: 1996-02 <br>Index: 1.14626147321371\",\"Period: 1996-03 <br>Index: 1.14161679941505\",\"Period: 1996-04 <br>Index: 1.14133745758398\",\"Period: 1996-05 <br>Index: 1.1454356272454\",\"Period: 1996-06 <br>Index: 1.16049832561252\",\"Period: 1996-07 <br>Index: 1.12854461839894\",\"Period: 1996-08 <br>Index: 1.13693474756998\",\"Period: 1996-09 <br>Index: 1.15960724337464\",\"Period: 1996-10 <br>Index: 1.18318452855662\",\"Period: 1996-11 <br>Index: 1.15571976969041\",\"Period: 1996-12 <br>Index: 1.19896697775734\",\"Period: 1997-01 <br>Index: 1.19007176363715\",\"Period: 1997-02 <br>Index: 1.22558604026848\"],\"hoverinfo\":[\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\"],\"type\":\"scatter\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"line\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nBottled Juices GEKS-T example\n:::\n:::\n\n\n\n\nSeveral time periods are possible to choose from this window for targeted tests.\n\n## Dominicks specific data flow\n\nTo contextualize the data flow, @fig-dominicks-data-flow shows how data flows in a research sense, but also how it would flow were it to be a real dataset.\n\n![Visual flow of data processing for Dominick's as if it were a real production dataset](/docs/images/dominicks-data-flow.svg){#fig-dominicks-data-flow}",
    "supporting": [
      "dominicks_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.11.0/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}